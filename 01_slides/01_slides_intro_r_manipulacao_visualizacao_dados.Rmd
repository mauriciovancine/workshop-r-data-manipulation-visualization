---
title: "Introdução ao R para manipulação e visualização de dados<br><br><br>"
subtitle: "1 Introdução à linguagem R"
author: " Maurício H. Vancine <br>"
institute: "UNESP - Rio Claro"
date: "17/11/2021-19/11/2021"
output:
  xaringan::moon_reader:
    css: [default, metropolis, metropolis-fonts, custom.css]
    lib_dir: libs
    nature:
      highlightStyle: rainbow
      highlightLines: false
      highlightSpans: false
      countIncrementalSlides: false
      slideNumberFormat: "%current%/%total%"
      ratio: "16:9"
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE, 
        encoding = "UTF-8",
        knitr.table.format = "html")
knitr::opts_chunk$set(fig.retina = 3, warning = FALSE, message = FALSE)
if(!require(countdown)) devtools::install_github("gadenbuie/countdown")
if(!require(vegan)) install.packages("vegan")
data(dune)
```

class: clear
background-image: url(img/r_rollercoaster.png)
background-size: 900px

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[@allison_horst](https://twitter.com/allison_horst)

---

# 1 Introdução à linguagem R

## Conteúdo

.pull-left[
## Funcionamento do R
1. Linguagem R
1. RStudio
1. Console
1. Scripts
1. Operadores
1. Objetos
1. Funções
1. Pacotes
1. Ajuda
1. Ambiente
1. Citações
]

.pull-right[
## Manipulação de dados
1. Atributos dos objetos
1. Manipulação de dados unidimensionais
1. Manipulação de dados multidimensionais
1. Valores faltantes e especiais
1. Diretório de trabalho
1. Importar dados
1. Conferência de dados importados
1. Exportar dados
1. Principais erros
1. Principal material de estudo
]

---

# 1 Introdução à linguagem R

## Análises Ecológicas no R

<br><br><br><br>

## .center[[Capítulo 4 - Introdução ao R](https://paternogbc.github.io/livro_aer/cap4.html)]

---

# 2 tidyverse

## Script

<br><br><br><br>

## .center[`02_script_intro_geoespacial_r.R`]

---

class: inverse, center, middle

# Funcionamento do R

---

background-image: url(img/r_logo.svg)
background-size: 400px
background-position: 50% 70%

# 1. Linguagem R

## Definição

O R é uma **linguagem de programação livre** (*open source*), direcionada à **manipulação, análise e visualização de dados**, com diversas **expansões** (*pacotes*) para o uso de **dados com formatos específicos** 

<br><br><br><br><br><br><br><br><br><br><br><br>
[R](https://www.r-project.org/)

---

background-image: url(img/general_curso_r.png), url(img/general_cinco_motivos.png)
background-size: 500px, 400px
background-position: 25% 80%, 90% 90%

# 1. Linguagem R

## Cinco motivos para usar R

1. R é completamente **gratuito**
1. Pessoas da comunidade **disponibilizam** seu trabalho em R
1. R possui um ecossistema que incentiva a **reprodutibilidade**
1. R tem uma **comunidade** vibrante e crescente
1. Os focos da linguagem são **modelagem, visualização e análise de dados**

.footnote[
[Curso-R](https://blog.curso-r.com/posts/2021-07-23-por-que-usar-r/)
]

---

background-image: url(img/r_rollercoaster.png), url(img/general_code_meme.jpg)
background-size: 600px, 500px
background-position: 7% 40%, 91% 80%

# 1. Linguagem R

## É legal, mas nem sempre é fácil...

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[@allison_horst](https://twitter.com/allison_horst)

---

class: inverse, center, middle

# E de onde surgiu o R?

---

background-image: url(img/person_john_chambers.jpg)
background-size: 350px
background-position: 80% 80%

# 1. Linguagem R

## Histórico - Linguagem S

### John M. Chambers (Stanford University, CA, EUA)

- Old S (1976-1987)
- New S (1988-1997)
- S4 (1998)
<br><br>
- Interface: S-PLUS (1988-2008)

<br><br><br><br><br><br><br>
[Wickham (2013)](http://vita.had.co.nz/papers/r-s.pdf)

---

background-image: url(img/person_gentleman_ihaka.jpg)
background-size: 400px
background-position: 85% 80%

# 1. Linguagem R

## Histórico - Linguagem R

### **R**obert Gentleman e **R**oss Ihaka (Auckland University, NZ)

#### Versões
- Desenvolvimento (1997-2000)
- Versão 1 (2000-2004)
- Versão 2 (2004-2013)
- Versão 3 (2013-2020)
- Versão 4 (2020-atual)

#### IDE (*Integrated Development Environment*)
- Interface: RStudio (2011-atual)
- Atualmente: **R Core Team**

<br>
[Wickham (2013)](http://vita.had.co.nz/papers/r-s.pdf)

---

background-image: url(img/cheatsheet_base_r.png)
background-size: 600px
background-position: 50% 70%

# 1. Linguagem R

## Base R

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Base-R](http://github.com/rstudio/cheatsheets/raw/master/base-r.pdf)

---

class: inverse, center, middle

# E o que o R pode fazer?

---

background-image: url(img/r_markdown_output_formats.png)
background-size: 350px
background-position: 90% 75%

# 1. Linguagem R

## Aplicações

### Análises e visualização de dados
- Estatísticas univariadas e multivariadas
- Análises de dados ecológicos (população, comunidades e ecossistemas)
- Análise de dados espaciais, temporais e sonoros
- Análise de dados funcionais, genéticos e filogenéticos
- Análise de dados geoespaciais e sensoriamento retomo
- Visualização de todos os dados anteriores

### R Markdown
- Textos em HTML, PDF, Word, ODT, Markdown
- Apresentação de slides
- Websites e Blogs
- Livros e artigos
- Shiny

---

class: inverse, center, middle

# Há uns 15 anos, um nome tem se destacado no avanço da linguagem R, na parte de *manipulação, visualização e análise de dados* (tidyverse e tidymodels)

---

background-image: url(img/person_hadley_wickham.jpg)
background-size: 500px
background-position: 50% 80%

# 1. Linguagem R

## Hadley Wickham

### Cientista Chefe no RStudio e Professor Adjunto de Estatística na Universidade de Auckland, Stanford e Rice

<br><br><br><br><br><br><br><br><br><br><br>
[Hadley Wickham](http://hadley.nz/)

---

class: inverse, center, middle

# Há uns 10 anos, outro nome tem se destacado no avanço da linguagem R, na parte de *textos, sites e apresentações* (*R Markdown*) 

---

background-image: url(img/person_yihui_xie.jpg), url(img/person_yihui_xie_avatar.png)
background-size: 500px, 150px
background-position: 50% 70%, 95% 10%

# 1. Linguagem R

## Yihui Xie

## Engenheiro de software no RStudio

<br><br><br><br><br><br><br><br><br><br><br><br>
[Yihui Xie](https://yihui.name/)

---

background-image: url(img/r_rstudio_vs01.png)
background-size: 600px
background-position: 50% 70%

# 2. RStudio

## Todos conhecem o RStudio?

---

background-image: url(img/r_rstudio_vs02.png), url(img/r_rstudio_vs03.png)
background-size: 650px, 650px
background-position: 50% 30%, 50% 85%

# 2. RStudio

## IDE 

*Integrated Development Environment* ou Ambiente de Desenvolvimento Integrado

<br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Ismay & Kim (2020)](https://moderndive.com/)

---

background-image: url(img/cheatsheet_rstudio_ide.png)
background-size: 600px
background-position: 50% 50%

# 2. RStudio

## RStudio IDE Cheatsheet

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>

[RStudio-IDE](https://github.com/rstudio/cheatsheets/raw/master/rstudio-ide.pdf)

---

background-image: url(img/rstudio.png)
background-size: 800px
background-position: 50% 70%

# 2. RStudio

## Interface

---

background-image: url(img/rstudio.png), url(img/rstudio_logo.svg)
background-size: 500px, 300px
background-position: 90% 80%, 90% 25%

# 2. RStudio

## Janelas e abas

**1. Editor/Script**: é onde escrevemos nossos códigos em R ou R Markdown  
**2. Console**: é onde os códigos são rodados e vemos as saídas  
**3. Environment**: painel com todos os objetos criados na sessão  
**3. History**: painel com o histórico dos códigos rodados  
**3. Connection**: painel para conectar banco de dados  
**3. Git**: painel do controle de versão  
**3. Tutorial**: painel de tutoriais  
**4. Files**: painel que mostra os arquivos no diretório de trabalho  
**4. Plots**: painel onde os gráficos são apresentados  
**4. Packages**: painel que lista os pacotes  
**4. Help**: painel onde a documentação das funções é exibida  
**4. Viewer**: painel de visualização  

---

background-image: url(img/rstudio.png), url(img/rstudio_logo.svg)
background-size: 500px, 300px
background-position: 90% 30%, 90% 85%

# 2. RStudio

## Atalhos

- **f1**: abre o painel de *Help*
- **ctrl + Enter**: roda a linha selecionada no script
- **ctrl + Shift + N**: abre um novo script
- **ctrl + S**: salva um script
- **ctrl + Z**: desfaz uma operação
- **ctrl + shift + Z**: refaz uma operação
- **alt + -**: insere um sinal de atribuição (<-)
- **ctrl + Shift + M**: insere um operador pipe (%>%) 
- **ctrl + Shift + C**: comenta uma linha no script - insere um (#) 
- **ctrl + Shift + R**: insere uma sessão (# ----------------------)
- **ctrl + Shift + H**: abre uma janela para selecionar o diretório de trabalho
- **ctrl + Shift + f10**: reinicia o console
- **ctrl + L**: limpa os códigos do console 
- **alt + Shift + K**: abre uma janela com todos os atalhos disponíveis

---

background-image: url(img/rstudio_project_logo.png), url(img/general_teressact.jpg), url(img/rstudio_project.png)
background-size: 100px, 100px, 700px 
background-position: 95% 10%, 95% 35%, 60% 80%

# 2. RStudio

## Projeto R (.Rproj) (Tesseract)

- Facilita o trabalho em múltiplos ambientes 
- Cada projeto possui seu diretório, documentos e workspace
- Permite versionamento

---

background-image: url(img/rstudio_project_logo.png), url(img/general_teressact.jpg), url(img/rstudio_project.webp)
background-size: 100px, 100px, 430px
background-position: 95% 10%, 95% 35%, 50% 90%

# 2. RStudio

## Projeto R (.Rproj) (Tesseract)

### Sempre **abram o RStudio** pelo arquivo **.Rproj**

### Ou **definam o projeto** depois de abrir o RStudio

---

background-image: url(img/rstudio_script.png)
background-size: 450px
background-position: 50% 90%

# 3. Console

## Console

### O console é onde a **linguagem R instalada é carregada** para executar os códigos

---

# 3. Console

## Console

### O console é onde a **linguagem R instalada é carregada** para executar os códigos

<br>

```{r}
10 + 2
```

<br>

--

```{r}
1:42
```

---

class: inverse, center, middle

# Alguém notou alguns colchetes a mais?

---

# 3. Console

## Colchetes

### Indicam a **posição** em uma sequência de elementos

```{r}
10 + 2
```

--

```{r}
1:42
```

--

```{r}
10:60
```

---

background-image: url(img/rstudio_script.jpg)
background-size: 700px
background-position: 50% 100%

# 4. Scripts

## Script (.R)

**Atalho**: `Ctrl + Shift + N`

- São **rascunhos** dos códigos
- Será neles que os **códigos serão escritos** e depois **enviados ao console do R**
- São **arquivos de texto simples**, que serão salvos no formato .R

---

# 4. Scripts

## Script (.R)

### Todos os **códigos** devem ser digitados preferencialmente no **script**

### Deixem o **cursor** em **qualquer local da linha** e executem essa linha utilizando essa **combinação**: 

### **Atalho**: `Ctrl + Enter`

--

### Vamos testar:

--

```{r}
1
```

--

```{r}
1 + 2
```

---

class: inverse, center, middle

# E é isso que faremos pelo resto de nossas vidas...

---

# 4. Scripts

## Esclarecimentos

<br>

### Isso é texto, não digite no R!

--

<br>

### Digitar no script

```{r eval=FALSE}
print("Isso é o resultado que deve aparecer no console")
```

--

### Resultado no console

```{r echo=FALSE}
print("Isso é o resultado que deve aparecer no console")
```

---

background-image: url(img/rstudio_script.png)
background-size: 500px
background-position: 50% 70%

# 4. Scripts

## Salvar um script

**Atalho**: `ctrl + S`

---

background-image: url(img/general_directory.png)
background-size: 400px
background-position: 50% 80%

# 4. Scripts

## Salvar um script

### Pasta do diretório `~/workshop-r-data-analysis/`:

- 00_plano_ensino
- 01_slides
- **02_scripts**
- 03_dados

--

<br><br>

### Nome do arquivo

## `01_01_script_intro_r_analise_dados.R`

---

# 4. Scripts

## Comentários (#)

### Comentários **não são lidos** pelo R e **descrevem informações** em nosso script

### São representados pelo **#** (hash) ou **#'** (hash-linha)

<br>

### Informações sobre os códigos

```{r}
# comentarios
# o r nao le o codigo depois do # (hash)

42 # essas palavras nao sao executadas, apenas o 42
```

---

# 4. Scripts

## Comentários (#)

### Comentários **não são lidos** pelo R e **descrevem informações** em nosso script

### São representados pelo **#** (hash) ou **#'** (hash-linha)

<br>

### Cabeçalho

```{r}
#' ---
#' titulo: Introdução ao R para análise de dados
#' autor: seu nome
#' data: 17-11-2021
#' ---
```

---

# 5. Operadores

## Operadores

.pull-left[ 

### Operadores aritméticos (Números)

<br>

| Operador |       Descrição      |   Uso   |
|:--------:|:--------------------:|:-------:|
|     +    | Adição               |  a + b  |
|     –    | Subtração            |  a - b  |
|     *    | Multiplicação        |  a * b  |
|     /    | Divisão              |  a / b  |
|    %%    | Resto da divisão     |  a %% b |
|    %/%   | Quociente da divisão | a %/% b |
|     ^    | Potenciação          |   a^b   |
]

.pull-right[ 

### Operadores relacionais (TRUE|FALSE)

<br>

| Operador |       Descrição       |   Uso   |
|:--------:|:---------------------:|:-------:|
|     <    | Menor                 |  a < b  |
|     >    | Maior                 |  a > b  |
|    ==    | Igual                 |  a == b |
|    <=    | Menor ou igual        |  a <= b |
|    >=    | Maior ou igual        | a > = b |
|    !=    | Não igual (diferente) |   a!=b  |
]

---

# 5. Operadores

## Ordem das operações aritméticas 

<br>

### .center[**`PRIORITÁRIO`** `()` > `^` > `* ou /` > `+ ou -` **`NÃO PRIORITÁRIO`**]

<br>

```{r}
# sem especificar - segue a ordem
1 * 2 + 2 / 2 ^ 2
```

```{r}
# especificando - segue a ordem dos parênteses
((1 * 2) + (2 / 2)) ^ 2
```

---

class: inverse, center, middle
# Exercícios

---

background-image: url(img/exercicio01.jpg)
background-size: 500px
background-position: 50% 50%

```{r echo=FALSE}
countdown(minutes = 3, seconds = 00, color_background = "gray30")
```

# Exercício 01

## Resolvam essa equação...

---

# Exercício 01

## Resposta

```{r}
# exercicio 01
7 + 7 / 7 + 7 * 7 - 7
```

---

# 6. Objetos

## Atribuição (<-)

### Objetos são palavras que **atribuímos** dados

--

### A atribuição possibilita a **manipulação** de dados ou resultados de análises

--

### Utilizaremos o símbolo **"<" (menor)** seguido de **"-" (menos)**, **sem espaço**!!!

<br>

--

## **palavra <- dados**

### **Atalho**: `Alt + -`

--

background-image: url(img/r_assignment.jpg)
background-size: 450px
background-position: 80% 90%

---

# 6. Objetos

## Vamos atribuir o **valor 10** à palavra **obj10**

--

```{r}
# atribuicao - simbolo (<-)
obj10 <- 10 
```

--

## Agora a palavra **obj10** vale **10**

### Mas não aconteceu nada....

--

background-image: url(img/gif_where.gif)
background-size: 500px
background-position: 50% 90%

---

# 6. Objetos

## Sempre **confira** a atribuição!!!

## Chame o objeto **novamente**!!!

```{r}
# atribuicao - simbolo (<-)
obj10 <- 10 
obj10
```

--

## Outro exemplo

```{r}
# atribuicao - simbolo (<-)
obj2 <- 2
obj2
```

---

# 6. Objetos

## CUIDADO!
### O R **sobrescreve** os valores dos objetos com o **mesmo nome**!

--

```{r}
# sobrescreve o valor dos objetos
obj <- 100
obj
```

--

```{r}
# obj agora vale 2
obj <- 2
obj
```

---

class: inverse, center, middle

# Os objetos podem ser visualizados no painel *Environment*

---

background-image: url(img/rstudio_script.png)
background-size: 500px
background-position: 50% 70%

# 6. Objetos

##  Ambiente (*Environment*)

---

# 6. Objetos

## O R tem **limitações** ao nomear objetos!

--

1. Nome de objetos só podem **começar por letras (a-z ou A-Z) ou pontos (.)**

--

2. Nome de objetos só podem **conter letras (a-z ou A-Z), números (0-9), underscores (_) ou pontos (.)**

--

3.  R é *case-sensitive*, i.e., ele difere **letras maiúsculas** de **minúsculas**. Assim, um objeto chamado *"resposta"* é diferente do objeto *"RESPOSTA"*

--

4. Evitem utilizar **letras maiúsculas**, **acentos** ou **cedilha (ç)**

--

5. Nome de objetos não podem ser iguais a **nomes especiais**: 

`break, else, FALSE, for, function, if, Inf, NA, NaN, next, repeat, return, TRUE, while`

---

# 6. Objetos

## Podemos utilizar **objetos** para fazer operações

--

```{r}
# definir dois objetos
va1 <- 10
va1

va2 <- 2
va2
```

---

# 6. Objetos

## Podemos utilizar **objetos** para fazer operações

```{r}
# operacoes com objetos
va1 + va2 # adicao
```
--
```{r}
va1 - va2 # subtracao
```
--
```{r}
va1 * va2 # multiplicacao
```
--
```{r}
va1 / va2 # divisao
```

---

# 6. Objetos

## Podemos utilizar **objetos** para fazer operações

```{r}
# operacoes com objetos e atribuicao
adi <- va1 + va2 # adicao
adi
```
--
```{r}
sub <- va1 - va2 # subtracao
sub
```
--
```{r}
mul <- va1 * va2 # multiplicacao
mul
```
--
```{r}
div <- va1 / va2 # divisao
div
```

---

class: inverse, middle, center
# Exercícios

---

# Exercício 02

## Verifique se 3x2³ é maior que 2x3²

```{r echo = FALSE}
countdown(minutes = 3, seconds = 00, color_background = "gray30")
```

---

# Exercício 02

## Resposta
```{r}
# exercicio 02
3 * 2 ^ 3 >= 2 * 3 ^ 2
```

---

background-image: url(img/code_function.png), url(img/code_function_annotated.png)
background-size: 250px, 400px
background-position: 87% 35%, 85% 90%

# 7. Funções

## Funções

### **Códigos** que realizam **operações** em **argumentos**

<br>

## Estrutura de uma função: 

<br>

> nome_da_funcao(argumento1, argumento2)

<br>

1. **Nome da função**: remete ao que ela faz
1. **Parênteses**: limitam a função
1. **Argumentos**: onde a função atuará 
1. **Vírgulas**: separam os argumentos

---

# 7. Funções

## Exemplos

```{r}
# soma
sum(10, 2)

# soma de objetos
sum(obj10, obj2)

# soma de objetos atribuidos a objetos
obj_sum <- sum(obj10, obj2)
```

---

# 7. Funções

## Argumentos

### Os **argumentos** de uma função podem ser de **dois tipos**:

1. **Valores** ou **Objetos**: a função irá **alterar os valores** em si ou os valores **atribuídos** aos objetos

2. **Parâmetros**: valores fixos que informam um **método** ou a realização de uma **operação**. Informa-se o **nome desse argumento**, seguido de **"="** e um *número*, *texto* ou *TRUE* ou *FALSE*

--

### Exemplo:
```{r}
sum(1, 2, 3, NA)
sum(1, 2, 3, NA, na.rm = TRUE)
```

---

# 7. Funções

## 1. Argumentos como **valores**

<br><br>

```{r}
# funcoes - argumentos como valores
# soma
sum(10, 2)
```

--

<br>

```{r}
# produto
prod(10, 2)
```

---

# 7. Funções

## 1. Argumentos como **objetos**

<br><br>

```{r}
# funcoes - argumentos como objetos
# soma
sum(va1, va2)
```

--

<br>

```{r}
# produto
prod(va1, va2)
```

---

# 7. Funções

## 2. Argumentos como **parâmetros**

```{r}
# funcoes - nome dos argumentos
# repeticao - todos
rep(x = 1:5, times = 10)
```

<br><br>

--

```{r}
# repeticao - cada
rep(x = 1:5, each = 10)
```

---

# 7. Funções

## Atribuição de resultados a objetos

```{r}
# atribuicao dos resultados
# repeticao - todos
rep_times <- rep(x = 1:5, times = 10)
rep_times
```
--
```{r}
# atribuicao dos resultados
# repeticao - todos
rep_each <- rep(x = 1:5, each = 10)
rep_each
```

---

# 7. Funções

## Atribuição, função e linha temporal

--

**Criar** dois objetos
```{r}
# resposta
# criar dois objetos
foo <- 2
bar <- 3
```

--

**Somar** esses objetos e **atribuição** ao objeto *su*
```{r}
# somar e atribuir
su <- sum(foo, bar)
su
```

--

**Raiz quadrada** do *su* e **atribuição** ao *sq*
```{r}
# raiz e atribuir
sq <- sqrt(su)
sq
```

---

# 7. Funções

## Atribuição, função e linha temporal

### Esse é o processo de programação no R: 

<br><br>

## 1. **Atribuição** de dados a objetos

## 2. **Funções** que **operam e mudam** esses dados

## 3. Nova **atribuição** desses resultados a novos objetos


---

class: inverse, middle, center
# Exercícios

---

# Exercício 03

### Criem dois objetos (qualquer nome) com os valores 100 e 300

### Multipliquem esses objetos (função **prod**) e atribuam ao objeto *mult*

### Façam o logaritmo natural (função **log**) do objeto *mult* e atribuam ao objeto *ln*

```{r echo = FALSE}
countdown(minutes = 4, seconds = 00, color_background = "gray30")
```

---

# Exercício 03

## Resposta

```{r}
# exercicio 03
# criar dois objetos
foo <- 100
bar <- 300
```

--

```{r}
# multiplicar e atribuir
mult <- prod(foo, bar)
mult 
```

--

```{r}
# raiz e atribuir
ln <- log(mult)
ln
```

---

class: inverse, center, middle

# Nesse momento vocês devem estar se perguntando: como raios vou saber o nome das funções?!

---

class: clear, inverse
background-image: url(img/gif_google_it.gif)
background-size: 1000px

---

class: clear
background-image: url(img/general_ajuda_google.png)
background-size: 1100px
background-position: 50% 50%

# 3.7 Funções

## Uma **maracutaia** para ajudar!

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Curso-R (2021)](https://livro.curso-r.com/index.html)

---

class: inverse, center, middle

# E de onde vêm as funções?!

---

background-image: url(img/package_r.png)
background-size: 200px
background-position: 90% 100%

# 7. Funções

## Funções vêm de **duas fontes**:

## 1. Pacotes já **instalados por padrão** e que são **carregados** quando abrimos o R

## 2. Pacotes que **instalamos** e **carregamos** com códigos

---

class: inverse, center, middle

# E o que são pacotes afinal?!

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## **Coleção de funções** para executar **tarefas específicas**

### Duas fontes: 
- **CRAN** (*finalizados*)
- **GitHub** (em *desenvolvimento*)

### Verificar **pacotes carregados**
```{r}
# verificar pacotes carregados
search()
```

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## **Coleção de funções** para executar **tarefas específicas**

### Duas fontes: 
- **CRAN** (*finalizados*)
- **GitHub** (em *desenvolvimento*)

### Verificar **pacotes instalados**

```{r eval=FALSE}
# verificar pacotes instalados
library()
```

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## Ex.: pacote `vegan` 

<br>

## Fontes:

### Pacotes do CRAN
https://cran.r-project.org/web/packages/vegan/index.html

<br>

### Pacotes do GitHub
https://github.com/vegandevs/vegan

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## Instalar pacotes

### 1. Instala-se apenas **uma vez**

### 2. **Precisa** estar conectado à **internet**

### 3. O **nome do pacote precisa** estar entre **aspas**

### 4. Função (CRAN): 
`install.packages()`

```{r eval=FALSE}
# instalar pacotes
install.packages("vegan")
```

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

##  Carregar pacotes

### 1. Carrega-se **toda vez** que se abre **uma nova sessão do R**

### 2. **Não precisa** estar conectado à **internet**

### 3. O **nome do pacote não precisa** estar entre **aspas**

### 4. Funções: 
`library()` ou `require()`

```{r}
# carregar pacotes
library(vegan)
```

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## Instalar pacotes do GitHub
### 1. Instalar pacote **devtools**
```{r eval=FALSE}
# instalar pacote devtools
install.packages("devtools")

# carregar pacote devtools
library(devtools)
```

###  Instalar usando a função `install_github()`
### Atentar para usar essa forma **usuário/repositório**

```{r eval=FALSE}
# instalar pacote do github
install_github("vegandevs/vegan")

# carregar pacote do github
library("vegan")
```

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## Atualização de pacotes

### Pacotes são **atualizados com frequência**

### Pacotes **não se atualizam sozinhos**

### A instalação de um pacote pode depender da **versão** de outros pacotes

### Geralmente é uma função que **demora** para rodar

<br>

```{r eval=FALSE}
# atualizacao dos pacotes instalados 
update.packages(ask = FALSE, checkBuilt = TRUE) 
```

---

class: inverse, center, middle

# E onde ficam esses pacotes no meu notebook?

---

# 8. Pacotes

## Diretório dos pacotes instalados

```{r}
# diretorios de intalacao dos pacotes
.libPaths()[1]
```

## Windows
C:/Users/**nome_do_computador**/Documentos/R/win-library/**numero_da_versao_r**

<br>

## Unix (Linux e MacOS):
/home/**nome_do_computador**/R/**tipo_do_computador**/**numero_da_versao_r**

---

background-image: url(img/package_r.png)
background-size: 150px
background-position: 97% 7%

# 8. Pacotes

## Exemplos:

### **vegan** – análises de comunidades
### **sf** – manipulação de vetores
### **raster** – manipulação de rasters
### **ggplot2** – gráficos
### **bblme** – seleção de modelos (AIC)
### **tidyverse** – data science

---

class: inverse, center, middle

# E quantos pacotes existem?

---

background-image: url(img/number_packages.png)
background-size: 600px
background-position: 50% 80%

# 8. Pacotes

## Número de pacotes no CRAN (atualmente)

```{r}
nrow(available.packages())
```

<br><br><br><br><br><br><br><br><br><br><br><br>
[Scraping CRAN with rvest](https://www.r-bloggers.com/2017/03/scraping-cran-with-rvest/)

---

class: inverse, middle, center

# Exercícios

---

# Exercício 04

## Instalem o pacote **tidyverse** do CRAN

```{r echo = FALSE}
countdown(minutes = 2, color_background = "gray30")
```

---

# Exercício 04

## Resposta

```{r eval=FALSE}
# exercicio 04
install.packages("tidyverse")
```

---

# 9. Ajuda

## Descreve as informações de uma função

```{r eval=FALSE}
# ajuda
# descreve as informacoes de uma funcao
help("mean") # arquivo .html
?mean
```

- **Description**: resumo da função
- **Usage**: como utilizar a função e quais os seus argumentos
- **Arguments**: detalha os argumentos e como os mesmos devem ser especificados
- **Details**: detalhes importantes para se usar a função
- **Value**: mostra como interpretar a saída (*output*) da função (os resultados)
- **Note**: notas gerais sobre a função
- **Authors**: autores da função
- **References**: referências bibliográficas para os métodos usados para construção da função
- **See also**: funções relacionadas
- **Examples**: exemplos do uso da função. Às vezes pode ser útil copiar esse trecho e colar no R para ver como funciona e como usar a função

---

background-image: url(img/rstudio_help.png)
background-size: 500px
background-position: 50% 70%

# 9. Ajuda

## Descreve as informações de uma função

---

background-image: url(img/r_package_help.png)
background-size: 800px
background-position: 90% 70%

# 9. Ajuda

## Detalhes de um pacote

```{r eval=FALSE}
# detalhes de um pacote
library(help = "vegan")
```

<br>

- **Descrição**
- **Versão**
- **Autores**
- **Dependências**
- **Sites**
- **Repositório**
- **Índice de funções**
- **Diretório**

---

class: inverse, center, middle

# Todos se lembram da atribuição e criação de objetos?

---

class: inverse, center, middle

# palavra <- dados

---

# 10. Ambiente

### Tamanho dos objetos

```{r}
# tamanho de um objeto
object.size("bar")
```

### Listar todos os objetos criados

```{r}
# listar objetos
ls()
```

```{r}
# listar objetos
objects()
```

---

background-image: url(img/gif_holy_shit.gif)
background-size: 700px
background-position: 50% 78%

# 10. Ambiente

## CUIDADO!

### Toda a vez que **fechamos o R**, os objetos criados são **apagados**!

---

# 10. Ambiente

### Salvar todos os objetos criados (.RData)

> Session -> Save Workspace As... -> meus_objetos.RData

```{r eval=FALSE}
# exportar objetos
save.image("todos_meus_objetos.RData")
```

--

### Carregar os objetos criados e salvos

> Session -> Load Workspace... -> meus_objetos.RData

```{r eval=FALSE}
# importar objetos
load("todos_meus_objetos.RData")
```

---

# 10. Ambiente

### Salvar todos os objetos criados (.RData)

```{r eval=FALSE}
# salvar apenas um objeto
save(bar, file = "meu_obj.RData")

# salvar apenas um objeto
save(bar, adi, file = "meus_objs.RData")
```

--

### Carregar os objetos criados e salvos

```{r eval=FALSE}
# carregar os objetos
load("meus_objs.RData")
```

---

# 10. Ambiente

### Salvar todos os objetos criados (.rds)

```{r eval=FALSE}
# salvar um objeto para um arquivo
saveRDS(obj, file = "meu_obj.rds")

```

--

### Carregar os objetos criados e salvos

```{r eval=FALSE}
# carregar esse objeto
readRDS(file = "meu_obj.rds")
```

---

# 10. Ambiente

### Remover um objeto

```{r}
# listar objetos
ls()
```
--
```{r}
# remover o objeto "bar"
rm(bar)
```
--
```{r}
# listar objetos
ls()
```

---

# 10. Ambiente

### Remover todos os objetos

```{r}
# listar objetos
ls()
```
--
```{r}
# remover todos os objetos
rm(list = ls())
```
--
```{r}
# listar objetos
ls()
```

---

# 10. Ambiente

### Carregar os objetos criados e salvos

> Session -> Load Workspace... -> meus_objetos.RData

```{r include=FALSE}
adi <- 1 
foo <- 1
bar <- 1
lo <- 1        
mu <- 1        
obj <- 1      
obj_10 <- 1    
obj_2 <- 1      
rep_each <- 1   
rep_times <- 1 
sq <- 1        
su <- 1        
sub <- 1       
va1 <- 1      
va2 <- 1
```


```{r}
# rodem para verificar 
ls()
```

---

# 11. Citações

## Como citar o R e os pacotes em trabalhos?

```{r}
## citacao do r e dos pacotes

# citacao do R
citation()
```

---

# 11. Citações

## Como citar o R e os pacotes em trabalhos?

```{r}
# citacao dos pacotes
citation("vegan")
```

---

class: inverse, center, middle

# Manipulação de dados

---

# Manipulação de dados

## Script

<br><br><br><br>

## .center[`01_02_script_intro_r_analise_dados.R`]

---

# 1. Atributos dos objetos

## Atribuição

<br><br>

## **palavra <- dados**

--

<br><br>

```{r}
# atribuicao - simbolo (<-)
obj_10 <- 10 
obj_10
```

---

# 1. Atributos dos objetos

## Atributos dos objetos no R

### Objetos possuem **três características**:

<br>

--

### 1. **Nome**: palavra que o R reconhece os dados atribuídos

### 2. **Conteúdo**: dados em si

### 3. **Atributos**: modos (*natureza*) e estruturas (*organização*)

---

# 1. Atributos dos objetos

## Atributos dos objetos no R

```{r}
# dados
data(dune)

# atributos
attributes(dune)
```

---

background-image: url(img/code_modes.png)
background-size: 50%
background-position: 50% 90%

# 1. Atributos dos objetos

## Modos (*natureza*): numeric (double), numeric (integer), character, logical e complex

### **Natureza** dos **elementos** que compõem os objetos

---

# 1. Atributos dos objetos

## **1. Numeric (double)**: números decimais

```{r}
# numeric double
obj_num_dou <- 1
obj_num_dou
```

```{r}
# mode
mode(obj_num_dou)
```

```{r}
# type
typeof(obj_num_dou)
```

---

# 1. Atributos dos objetos

## **2. Numeric (integer)**: números inteiros

```{r}
# numeric integer
obj_num_int <- 1L
obj_num_int
```

```{r}
# mode
mode(obj_num_int)
```

```{r}
# type
typeof(obj_num_int)
```

---

# 1. Atributos dos objetos

## **3. Character**: texto ou caracteres

```{r}
# character
obj_cha <- "a" # atencao para as aspas
obj_cha
```

```{r}
# mode
mode(obj_cha)
```

---

# 1. Atributos dos objetos

## **4. Logical**: ocorrência ou não de um evento (TRUE ou FALSE)

```{r}
# logical
obj_log <- TRUE # maiusculas e sem aspas
obj_log
```

```{r}
# mode
mode(obj_log)
```

---

# 1. Atributos dos objetos

## **5. Complexo**: números complexos

```{r}
# complex
obj_com <- 1+1i # parte imaginaria
obj_com
```

```{r}
# mode
mode(obj_com)
```

---

background-image: url(img/modos.png)
background-size: 400px
background-position: 80% 85%

# 1. Atributos dos objetos

## Resumindo:

### A **natureza** dos **elementos** definirá os **modos** dos objetos

### Modos:

1. Numeric double (**número decimal**): *1*
1. Numeric integer (**número inteiro**): *1L*
1. Character (**texto**): *"a"*, *"2500"*, *"amostra_01"*
1. Logical (**lógico**): *TRUE* ou *FALSE*
1. Complexo (**complex**): *1+1i*

<br><br><br><br><br>
[R Programming – Beginners Guide To R Programming Language](https://www.edureka.co/blog/r-programming-language)

---

# 1. Atributos dos objetos

## Verificar o modo dos objetos ou fazer a conversão entre os modos

```{r eval=FALSE}
# verificar o modo dos objetos
is.numeric()
is.integer()
is.character()
is.logical()
is.complex()

# conversoes entre modos
as.numeric()
as.integer()
as.character()
as.logical()
as.complex()
```

```{r}
# exemplo
as.character(obj_num_dou)
```

---

background-image: url(img/code_data_structures01.png)
background-size: 500px
background-position: 50% 85%

# 1. Atributos dos objetos

## Estruturas (*organização*): vector, factor, matrix, array, data frame e list

### Organização (**modos** e **dimensionalidade**) dos elementos dos objetos

---

background-image: url(img/code_data_structures02.png)
background-size: 600px
background-position: 50% 70%

# 1. Atributos dos objetos

## Estruturas (*organização*): vector, factor, matrix, array, data frame e list

---

background-image: url(img/code_data_structures03.png)
background-size: 800px
background-position: 50% 50%

# 1. Atributos dos objetos

## Estruturas (*organização*): vector, factor, matrix, array, data frame e list

---

# 1. Atributos dos objetos

## **1. Vector**: homogêneo (*um modo*) e unidimensional (*uma dimensão*)

### O **vetor** representa medidas de uma **variável quantitativa** (discretas ou contínuas) ou **descrição** (informações em texto)

--

### Ex.: medidas tomadas em campo ao longo de uma amostragem de 5 meses

1. Amostragens: {"amostra_01", "amostra_02", "amostra_03", "amostra_04", "amostra_05"}
2. Temperatura: {15, 18, 20, 22, 18}
3. Abertura do dossel: {0.37, 0.45, 0.65, 0.75, 0.40
4. Abundância de uma espécie: {6, 3, 0, 0, 2}

---

background-image: url(img/general_vector_math.jpg)
background-size: 500px
background-position: 50% 70%

# 1. Atributos dos objetos

## Não me refiro exatamente ao vetor da matemática

---

background-image: url(img/code_vector_types01.png)
background-size: 800px
background-position: 50% 50%

# 1. Atributos dos objetos

## Sequência de elementos

---

background-image: url(img/code_vector_summary_tree.png)
background-size: 550px
background-position: 50% 70%

# 1. Atributos dos objetos

## Tipos

---

# 1. Atributos dos objetos

### Há diversas formas de se criar um **vetor**:

### 1. Concatenar elementos

```{r}
# concatenar elementos numericos
temp <- c(15, 18, 20, 22, 18)
temp
```
<br>

```{r}
# concatenar elementos de texto
amos <- c("amostra_01", "amostra_02", "amostra_03", "amostra_04")
amos
```

---

# 1. Atributos dos objetos

### Há diversas formas de se criar um **vetor**:

### 2. Sequência

```{r}
# sequencia unitaria (x1:x2)
se <- 1:10
se
```
<br>

```{r}
# sequencia com diferentes espacamentos 
se_e <- seq(from = 0, to = 100, by = 10) 
se_e
```

---

# 1. Atributos dos objetos

### Há diversas formas de se criar um **vetor**:

### 3. Repetição

```{r}
# rep(x, times) # repete x tantas vezes
rep_times <- rep(x = c(1, 2), times = 5)
rep_times
```
<br>

```{r}
# rep(x, each) # retete x tantas vezes de cada
rep_each <- rep(x = c("a", "b"), each = 5)
rep_each
```

---

# 1. Atributos dos objetos

### Há diversas formas de se criar um **vetor**:

### 4. "Colar" palavras com uma sequência numérica

```{r}
# palavra e sequencia numerica - sem separacao definida (" ")
am1 <- paste("amostra", 1:5)
am1
```
<br>

```{r}
# palavra e sequencia numerica - separacao por "_0"
am2 <- paste("amostra", 1:5, sep = "_0")
am2
```

---

# 1. Atributos dos objetos

### Há diversas formas de se criar um **vetor**:

### 5. Amostrando aleatoriamente elementos

```{r}
# amostragem aleatória - sem reposição
sa_sem_rep <- sample(1:100, 10)
sa_sem_rep
```

```{r}
# amostragem aleatória - com reposição
sa_com_rep <- sample(1:10, 100, replace = TRUE)
sa_com_rep
```

---

class: inverse, middle, center
# Exercícios

---

# Exercício 05

## Vector
### Escolham números para jogar na mega-sena
### Lembrando: são 6 valores de 1 a 60 e atribuam a um objeto "agora_vai"

```{r echo=FALSE}
countdown(minutes = 4, seconds = 00, color_background = "gray30")
```

---

# Exercício 05

## Resposta

```{r}
# exercicio 05
agora_vai <- sample(1:60, 6, replace = FALSE)
agora_vai
```

---

class: inverse, center, middle

# E se eu criar um vetor com elementos de **modos diferentes**?

---

# 1. Atributos dos objetos

## Vetor com elementos de **modos diferentes**:

<br>

```{r}
# vetor com modos diferentes
ve <- c(1, "a", 3)
ve
```

<br>
```{r}
# vetor com modos diferentes
ve <- c(1, "a", TRUE)
ve
```

---

background-image: url(img/code_modes.png)
background-size: 45%
background-position: 50% 100%

# 1. Atributos dos objetos

## Coerção

### Mudança do **modo** dos elementos para um **mesmo modo**

### Essa mudança segue essa ordem:

> ### .center[`DOMINANTE` **character** >> **numeric** >> **logical** `RECESSIVO`]

---

# 1. Atributos dos objetos

## Conversão

### Podemos **forçar** um vetor a ter um **modo específico**

### Ideia semelhante: mudar o **tipo da célula** numa planilha eletrônica

### Conversão

```{r eval=FALSE}
# funcoes de conversao
as.character()
as.integer()
as.numeric()
as.double()
as.integer()
as.logical()
```

---

# 1. Atributos dos objetos

## **2. Factor**: homogêneo (*um modo* - sempre *numeric*), unidimensional (*uma dimensão*) e possui ainda **levels** (níveis)

--

### O **factor** representa medidas de uma **variável qualitativa**, podendo ser **nominal** ou **ordinal**

--

### Ex.: medidas tomadas em campo ao longo de uma amostragem de 6 meses
1. Amostragens: {"amostra_01", "amostra_02", "amostra_03", "amostra_04", "amostra_05"}
2. Tipo de floresta: {fechada, fechada, aberta, aberta, aberta}
3. Abundância de uma espécie: {alta, media, baixa, baixa, media}

---

background-image: url(img/code_factor.png)
background-size: 70%
background-position: 50% 75%

# 1. Atributos dos objetos

## **2. Factor**: homogêneo (*um modo* - sempre *numeric*), unidimensional (*uma dimensão*) e possui ainda **levels** (níveis)

---

# 1. Atributos dos objetos

## **2. Factor (nominal)**: variáveis nominais

```{r}
# fator nominal
fa_no <- factor(x = sample(x = c("floresta", "pastagem", "cerrado"), 
                           size = 20, replace = TRUE),
                levels = c("floresta", "pastagem", "cerrado"))
fa_no
```

```{r}
levels(fa_no)
```

---

# 1. Atributos dos objetos

## **2. Factor (ordinal)**: variáveis ordinais

```{r}
# fator ordinal
fa_or <- factor(x = sample(x = c("baixa", "media", "alta"), 
                           size = 20, replace = TRUE),
                levels = c("baixa", "media", "alta"), ordered = TRUE)
fa_or
```

```{r}
levels(fa_or)
```

---

# 1. Atributos dos objetos

## **2. Factor**: conversão

### Criar um vetor **character**

```{r}
# conversao de fatores
ve_ch <- c("alta", "media", "baixa", "baixa", "media")
ve_ch
```

```{r}
# modo
mode(ve_ch)
```

```{r}
# classe
class(ve_ch)
```

---

# 1. Atributos dos objetos

## **2. Factor**: conversão

### Forçar a ser **factor nominal**

```{r}
# conversao de fatores
fa_no <- as.factor(ve_ch)
fa_no
```

```{r}
# niveis
levels(fa_no)
```

```{r}
# classe
class(fa_no)
```

---

class: clear, inverse, middle, center
# Exercícios

---

# Exercício 06

## Factor
### Criem um fator chamado "tr", com dois níveis ("cont" e "trat") para descrever 100 locais de amostragem, 50 de cada tratamento. O fator deve ser dessa forma:

`cont, cont, cont, ...., cont, trat, trat, ...., trat`

```{r echo=FALSE}
countdown(minutes = 4, seconds = 00, color_background = "gray30")
```

---

# Exercício 06

## Resposta

```{r eval=FALSE}
# exercicio 06
# solucao 1
ch <- rep(c("cont", "trat"), each = 50)
ch

tr <- as.factor(ch)
tr
```

--

```{r eval=FALSE}
# solucao 2
tr <- as.factor(rep(c("cont", "trat"), each = 50))
tr
```

---

background-image: url(img/code_data_structures03.png)
background-size: 800px
background-position: 50% 50%

# 1. Atributos dos objetos

## **3. Matrix**

---

# 1. Atributos dos objetos

## **3. Matrix**: homogêneo (*um modo*) e bidimensional (*duas dimensões*)

--

### A **matrix** representa os dados no formato de **tabela**, com **linhas** e **colunas**

--

### As **linhas** representam **unidades amostrais** (locais, transectos, parcelas) e as **colunas** representam **variáveis quantitativas** (discretas ou contínuas) ou **descrições** (informações em texto)

---

background-image: url(img/code_matrix.png)
background-size: 450px
background-position: 50% 85%

# 1. Atributos dos objetos

## **3. Matrix**: homogêneo (*um modo*) e bidimensional (*duas dimensões*)

### Ex.: cinco espécies amostradas em cinco locais

---

class: inverse, center, middle

# Esse formato lembra algo?

---

background-image: url(img/general_eletronic_sheet.png)
background-size: 700px
background-position: 50% 60%

# 1. Atributos dos objetos

## **3. Matrix**: planilhas eletrônicas

---

class: clear, inverse
background-image: url(img/gif_mind_blowing01.gif)
background-size: 900px

---

# 1. Atributos dos objetos

## Há **duas formas** de se construir uma **matrix** no R:

### 1. Dispondo elementos

`matrix()`: dispõem um vetor em um certo número de linhas e colunas

```{r}
# matriz - funcao matrix
# vetor
ve <- 1:12
```

```{r}
# matrix - preenchimento por linhas - horizontal
ma_row <- matrix(data = ve, nrow = 4, ncol = 3, byrow = TRUE)
ma_row
```

---

# 1. Atributos dos objetos

## Há **duas formas** de se construir uma **matrix** no R:

### 1. Dispondo elementos

`matrix()`: dispõem um vetor em um certo número de linhas e colunas

```{r}
# matriz - funcao matrix
# vetor
ve <- 1:12
```

```{r}
# matrix - preenchimento por colunas - vertical
ma_col <- matrix(data = ve, nrow = 4, ncol = 3, byrow = FALSE)
ma_col
```

---

# 1. Atributos dos objetos

## Há **duas formas** de se construir uma **matrix** no R:

### 2. Combinando vetores

`rbind()`: combina vetores por linha, i.e., vetor embaixo do outro

`cbind()`: combina vetores por coluna, i.e., vetor ao lado do outro

```{r}
# criar dois vetores
vec_1 <- c(1, 2, 3)
vec_2 <- c(4, 5, 6)
```

```{r}
# combinar por linhas - vertical - um embaixo do outro
ma_rbind <- rbind(vec_1, vec_2)
ma_rbind
```

---

# 1. Atributos dos objetos

## Há **duas formas** de se construir uma **matrix** no R:

### 2. Combinando vetores

`rbind()`: combina vetores por linha, i.e., vetor embaixo do outro

`cbind()`: combina vetores por coluna, i.e., vetor ao lado do outro

```{r}
# criar dois vetores
vec_1 <- c(1, 2, 3)
vec_2 <- c(4, 5, 6)
```

```{r}
# combinar por colunas - horizontal - um ao lado do outro
ma_cbind <- cbind(vec_1, vec_2)
ma_cbind
```

---

class: inverse, middle, center
# Exercícios

---

# Exercício 07

## Matrix

### Criem uma matriz chamada "ma", resultante da disposição de um vetor composto por 10000 valores aleatórios entre 0 e 10. A matriz deve conter 100 linhas e ser disposta por colunas

```{r echo=FALSE}
countdown(minutes = 4, seconds = 00, color_background = "gray30")
```

---

# Exercício 07

## Resposta

```{r eval=FALSE}
# exercicio 07
ma <- matrix(sample(0:10, 10000, rep = TRUE), nrow = 100, byrow = FALSE)
ma
```

---

background-image: url(img/code_data_structures03.png)
background-size: 800px
background-position: 50% 50%

# 1. Atributos dos objetos

## **4. Array**

---

background-image: url(img/code_array.png)
background-size: 500px
background-position: 50% 90%

# 1. Atributos dos objetos

## **4. Array**: homogêneo (*um modo*) e multidimensional (*mais de duas dimensões*)

### O **array** representa combinação de **tabelas**, com **linhas**, **colunas** e **dimensões**

---

class: clear, inverse
background-image: url(img/gif_jim_carrey.gif)
background-size: 700px

---

# 1. Atributos dos objetos

## Há **uma forma** de se construir um **array** no R:

### 1. Dispondo elementos em dimensões

`array()`: dispõem um vetor em um certo número de linhas, colunas e dimensões....

```{r}
# vetor
ve <- 1:8
ve
```

---

# 1. Atributos dos objetos

## Há **uma forma** de se construir um **array** no R:

### 1. Dispondo elementos em dimensões

`array`: dispõem um vetor em um certo número de linhas, colunas e dimensões....
```{r}
# array
ar <- array(data = ve, dim = c(2, 2, 2))
ar
```

---

background-image: url(img/code_data_array.png)
background-size: 700px
background-position: 50% 130%

# 1. Atributos dos objetos

## Até o momento vimos **estruturas homogêneas**

---

background-image: url(img/code_data_same.png)
background-size: 700px
background-position: 50% 120%

# 1. Atributos dos objetos

## Agora veremos as **estruturas heterogêneos**

---

background-image: url(img/code_data_structures03.png)
background-size: 800px
background-position: 50% 50%

# 1. Atributos dos objetos

## **5. Data frame**

---

# 1. Atributos dos objetos

## **5. Data frame**: heterogêneo (*mais de um modo*) e bidimensional (*duas dimensões*)

### O **data frame** representa dados no formato de **tabela**, com **linhas** e **colunas**

### As **linhas** representam **unidades amostrais** (locais, transectos, parcelas) e as **colunas** representam **descrições** (informações em texto), **variáveis quantitativas** (discretas ou contínuas) e/ou **variáveis qualitativas** (nominais ou ordinais)

---

class: inverse, center, middle

# Esse formato também lembra algo?

---

background-image: url(img/general_eletronic_sheet.png)
background-size: 700px
background-position: 50% 60%

# 1. Atributos dos objetos

## **5. Data frame**: planilhas eletrônicas

---

class: inverse, center, middle

# Esse é justamente o formato de entrada dos dados de planilhas eletrônicas!

---

class: clear, inverse
background-image: url(img/gif_mind_blowing02.gif)
background-size: 700px

---

# 1. Atributos dos objetos

## Há **uma forma** de se construir um **data frame** no R:

### 1. Combinando vetores horizontalmente

`data.frame()`: combina vetores horizontalmente, um ao lado do outro. Semelhante à função `cbind()`

```{r}
# criar tres vetores
vec_ch <- c("sp1", "sp2", "sp3")
vec_nu <- c(4, 5, 6)
vec_fa <- factor(c("campo", "floresta", "floresta"))
```

```{r}
# data.frame - combinar por colunas - horizontal - um ao lado do outro
df <- data.frame(vec_ch, vec_nu, vec_fa)
df
```

---

# 1. Atributos dos objetos

## Há **uma forma** de se construir um **data frame** no R:

### 1. Combinando vetores horizontalmente

### Também podemos informar o nome das colunas

--
```{r}
# data frame
df <- data.frame(especies = vec_ch, 
                 abundancia = vec_nu, 
                 vegetacao = vec_fa)
df
```

---

# 1. Atributos dos objetos

## **data frame** vs **cbind**

### Criação dos vetores

```{r}
# vetores
pa <- paste("parcela", 1:4, sep = "_")
pa
```

```{r}
pe <- sample(0:1, 4, rep = TRUE)
pe
```

```{r}
tr <- factor(rep(c("trat", "cont"), each = 2))
tr
```

---

# 1. Atributos dos objetos

## Qual a diferença?

```{r}
# uniao de vetores
df <- data.frame(pa, pe, tr)
df
```

```{r}
# estrutura
str(df)
```

---

# 1. Atributos dos objetos

## Qual a diferença?

```{r}
# uniao de vetores
df_c <- cbind(pa, pe, tr)
df_c
```

```{r}
# estrutura
str(df_c)
```

---

class: inverse, middle, center
# Exercícios

---

# Exercício 08

## Data frame

### Criem um data frame "df", resultante da composição desses vetores: 
`id: 1:50`

`sp: sp01, sp02, ..., sp49, sp50`

`ab: 50 valores aleatórios entre 0 a 5`

```{r echo=FALSE}
countdown(minutes = 5, seconds = 00, color_background = "gray30")
```

---

# Exercício 08

## Resposta

```{r eval=FALSE}
# exercicio 08
id <- 1:50
id

sp <- c(paste("sp", 1:9, sep = "0"), paste("sp", 10:50, sep = ""))
sp

ab <- sample(0:5, 50, replace = TRUE)
ab

df <- data.frame(id, sp, ab)
df
```

---

background-image: url(img/code_data_structures03.png)
background-size: 800px
background-position: 50% 50%

# 1. Atributos dos objetos

## **6. List**

---

# 1. Atributos dos objetos

## **6. List**: heterogêneo (*mais de um modo*) e unidimensional (*uma dimensão*)

### Tipo **especial de vetor** que aceita **objetos** como **elementos**

### Estrutura de dados utilizado para **agrupar objetos**

### É a **saída** de muitas funções que fazem **análises estatísticas**

--

background-image: url(img/code_list.png)
background-size: 300px
background-position: 50% 95%

---

# 1. Atributos dos objetos

## Há **uma forma** de se construir um **listas** no R:

### 1. Combinando objetos horizontalmente

`list()`: combina objetos horizontalmente, semelhante à função `c()`

```{r}
# lista
li <- list(rep(1, 20), # vector
           factor(1, 1), # factor
           cbind(c(1, 2), c(1, 2))) # matrix
li
```

---

# 1. Atributos dos objetos

## Há **uma forma** de se construir um **listas** no R:

### 1. Combinando objetos horizontalmente

> Também podemos **nomear** os elementos

```{r}
# lista com nomes
li <- list(vector = rep(1, 20), # vector
           factor = factor(1, 1), # factor
           matrix = cbind(c(1, 2), c(1, 2))) # matrix
li
```

---

class: inverse, center, middle

# Dúvidas?

---

class: inverse, center, middle

# Bora manejar isso tudo?

---

class: clear
background-image: url(img/r_data_manipulation.png)
background-size: 700px

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **1. Indexação []**: acessa elementos de vetores e fatores

```{r}
# indexacao []

# fixar a amostragem
set.seed(42)

# amostrar 10 elementos de uma sequencia
ve <- sample(x = seq(0, 2, .05), size = 10)
ve
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Selecionar elementos
```{r}
# seleciona o quinto elemento
ve[5]
```

```{r}
# seleciona os elementos de 1 a 5
ve[1:5] 
```

```{r}
# seleciona os elementos 1 e 10 e atribui
ve_sel <- ve[c(1, 10)]
ve_sel
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **1. Indexação []**: acessa elementos de vetores e fatores

### Retirar elementos
```{r}
# retira o decimo elemento
ve[-10]
```

```{r}
# retira os elementos 2 a 9
ve[-(2:9)]
```

```{r}
# retira os elementos 5 e 10 e atribui
ve_sub <- ve[-c(5, 10)]
ve_sub
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **2. Seleção condicional**: selecionar elementos por condições 

```{r}
# dois vetores
foo <- 42
bar <- 23
```

```{r eval=FALSE}
# operadores relacionais - saidas booleanas (TRUE ou FALSE)
foo == bar # igualdade
foo != bar # diferenca 
foo > bar # maior
foo >= bar # maior ou igual
foo < bar # menor
foo <= bar # menor ou igual
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **2. Seleção condicional**: selecionar elementos por condições 

```{r}
# quais valores sao maiores que 1?
ve > 1
```

```{r}
# valores acima de 1
ve[ve > 1] 
```

```{r}
# atribuir valores maiores que 1
ve_maior1 <- ve[ve > 1]
ve_maior1
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **3. Funções de manipulação**: `max()`, `min()`, `range()`, `length()`, `sort()` e `round()`

```{r}
# maximo
max(ve)
```

```{r}
# minimo
min(ve)
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **3. Funções de manipulação**: `max()`, `min()`, `range()`, `length()`, `sort()` e `round()`

```{r}
# amplitude
range(ve)
```

```{r}
# comprimento
length(ve)
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **3. Funções de manipulação**: `max()`, `min()`, `range()`, `length()`, `sort()` e `round()`

```{r}
# ordenar crescente
sort(ve)
```

```{r}
# ordenar decrescente
sort(ve, dec = TRUE)
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **3. Funções de manipulação**: `max()`, `min()`, `range()`, `length()`, `sort()` e `round()`

```{r}
# arredondamento
ve
```

```{r}
# arredondamento
round(ve, digits = 1)
```

```{r}
# arredondamento
round(ve, digits = 0)
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **3. Funções de manipulação**: `any()`, `all()` e `which()`

```{r}
# algum?
any(ve > 1)
```

```{r}
# todos?
all(ve > 1)
```

```{r}
# qual(is)?
which(ve > 1)
```

---

# 2. Manipulação de dados (1D)

## Vetor e Fator

### **3. Funções de manipulação**: `subset()` e `ifelse()`

```{r}
# subconjunto
subset(ve, ve > 1)
```

```{r}
# condicao para uma operacao
ifelse(ve > 1, 1, 0)
```

---

# 2. Manipulação de dados (1D)

## Listas

### **1. Indexação []**: acessa elementos de listas

```{r}
## indexacao []
# lista
li <- list(elem1 = 1, elem2 = 2, elem3 = 3)
li
```

---

# 2. Manipulação de dados (1D)

## Listas

### **1. Indexação []**: acessa elementos de listas

### Selecionar elementos
```{r}
# acessar o primeiro elemento
li[1]
```

```{r}
# acessar o primeiro e o terceiro elementos e atribuir
li2 <- li[c(1, 3)]
li2
```

---

# 2. Manipulação de dados (1D)

## Listas

### **1. Indexação []**: acessa elementos de listas

### Retirar elementos

```{r}
# retirar o primeiro elemento
li[-1]
```

```{r}
# retirar o segundo elemento e atribuir
li_13 <- li[-2]
li_13
```

---

# 2. Manipulação de dados (1D)

## Listas

### **2. Indexação [[]]**: acessa valores dos elementos de listas

### Retirar elementos
```{r}
# valor do primeiro elemento
li[[1]]
```

```{r}
# valor do segundo elemento e atribuir
li2_val <- li[[2]]
li2_val
```

---

# 2. Manipulação de dados (1D)

## Listas

### **3. Indexação $**: acessa elementos pelo nome

### Selecionar elementos

```{r}
# acessar o primeiro elemento
li$elem1
```

```{r}
# acessar o primeiro e o terceiro elementos e atribuir
li1 <- li$elem1
li1
```

---

# 2. Manipulação de dados (1D)

## Listas

### **4. Funções**: `length()` e `names()`

```{r}
# comprimento
length(li)
```

```{r}
# names
names(li)
```

---

# 2. Manipulação de dados (1D)

## Listas

### **4. Funções**: `length()` e `names()`

```{r}
# renomear
names(li) <- paste0("elemento0", 1:3)
li
```

---

background-image: url(img/code_df_manipulation02.png)
background-size: 700px
background-position: 50% 70%

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

---

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

### **1. Indexação []**: acessa elementos de matrizes, arrays e data frames

```{r}
# matriz
ma <- matrix(1:12, 4, 3)
ma 
```

---

background-image: url(img/code_df_manipulation01.png)
background-size: 400px
background-position: 50% 50%

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

### **1. Indexação []**: acessa elementos de matrizes, arrays e data frames

---

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

### **1. Indexação []**: acessa elementos de matrizes, arrays e data frames

```{r}
# linha 3
ma[3, ]
```

```{r}
# coluna 2
ma[, 2] 
```

```{r}
# elemento da linha 1 e coluna 2
ma[1, 2] 
```

```{r}
# elementos da linha 1 e coluna 1 e 2
ma[1, 1:2] 
```

---

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

### **1. Indexação []**: acessa elementos de matrizes, arrays e data frames

```{r}
# elementos da linha 1 e coluna 1 e 3
ma[1, c(1, 3)] 
```

```{r}
# elementos da linha 1 e coluna 1 e 3 e atribuir
ma_sel <- ma[1, c(1, 3)]
ma_sel
```

---

background-image: url(img/code_df_manipulation02.png)
background-size: 700px
background-position: 50% 75%

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

### **1. Indexação []**: acessa elementos de matrizes, arrays e data frames

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **2. Indexação $**: acessa elementos de data frames

```{r}
# criar tres vetores
sp <- paste("sp", 1:10, sep = "")
abu <- 1:10
flo <- factor(rep(c("campo", "floresta"), each = 5))
```

```{r}
# data frame
df <- data.frame(sp, abu, flo)
df
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **2. Indexação $**: acessa colunas de data frames

```{r}
# $ funciona apenas para data frame 
df$sp 
```

```{r}
df$abu
```

```{r}
df$flo
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **2. Indexação $**: acessa colunas de data frames

```{r}
# funcoes para uma coluna indexada por $
length(df$abu)
max(df$abu)
min(df$abu)
range(df$abu)
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **3. Indexação $ e mudanças de colunas**: acessa e modifica colunas em data frames

```{r}
# modo
mode(df$abu)
```

```{r}
# converter colunas para caracter
df$abu <- as.character(df$abu)
```

```{r}
# modo
df$abu
mode(df$abu)
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **3. Indexação $ e mudanças de colunas**: acessa e modifica colunas em data frames

```{r}
# converter colunas para numerico
df$abu <- as.numeric(df$abu)
```

```{r}
# modo
df$abu
mode(df$abu)
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **4. Indexação $ e adicionar colunas**: acessa e adiciona colunas em data frames

```{r}
# adicionar coluna
set.seed(42)
df$abu2 <- sample(0:1, nrow(df), rep = TRUE)
```

```{r}
df$abu2
```

```{r}
df
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **5. Seleção condicional**: filtro de linhas

### Selecionar linhas = filtro da planilha eletrônica

```{r}
# selecionar linhas de uma matriz ou data frame 
df[df$abu > 4, ]
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **5. Seleção condicional**: filtro de linhas

### Selecionar linhas = filtro da planilha eletrônica

```{r}
# selecionar linhas de uma matriz ou data frame 
df[df$abu2 == 0, ]
```

---

# 3. Manipulação de dados (2D ou nD)

## Data Frames

### **5. Seleção condicional**: filtro de linhas

### Selecionar linhas = filtro da planilha eletrônica

```{r}
# selecionar linhas de uma matriz ou data frame 
df[df$flo == "floresta", ]
```

---

# 3. Manipulação de dados (2D ou nD)

## Matrizes, Arrays e Data Frames

### **6. Funções de conferência e manipulação**

`head()`: mostra as primeiras 6 linhas <br>
`tail()`: mostra as últimas 6 linhas <br>
`nrow()`: mostra o número de linhas <br>
`ncol()`: mostra o número de colunas <br>
`dim()`: mostra o número de linhas e de colunas <br>
`rownames()`: mostra os nomes das linhas (locais) <br>
`colnames()`: mostra os nomes das colunas (variáveis) <br>
`str()`: mostra as classes de cada coluna (estrutura) <br>
`summary()`: mostra um resumo dos valores de cada coluna <br>
`rowSums()`: calcula a soma das linhas (horizontal) <br>
`colSums()`: calcula a soma das colunas (vertical) <br>
`rowMeans()`: calcula a média das linhas (horizontal) <br>
`colMeans()`: calcula a média das colunas (vertical)

---

# 4. Valores faltantes e especiais

## São **valores reservados** que representam *dados faltantes*, *indefinições matemáticas*, *infinitos* e *objetos nulos*

<br><br>

### **1. NA (Not Available)**

### **2. NaN (Not a Number)**

### **3. Inf (Infinito)**

### **4. NULL**

---

# 4. Valores faltantes e especiais

## **1. NA (Not Available)**

### Significa dado faltante/indisponível

### **NA** deve ser maiúsculo

```{r}
# na - not available
foo_na <- NA
foo_na
```

---

# 4. Valores faltantes e especiais

## **1. NA (Not Available)**

### Criar um data frame com NA
```{r}
# data frame
df <- data.frame(var1 = c(1, 4, 2, NA), var2 = c(1, 4, 5, 2))
df
```

---

# 4. Valores faltantes e especiais

## **1. NA (Not Available)**

### Função para verificar a **presença/ausência** de NA's
```{r}
# possui nas?
is.na(df)
```

--

### Função para verificar a **presença de algum** NA's
```{r}
# algum é na?
any(is.na(df))
```

---

# 4. Valores faltantes e especiais

## **1. NA (Not Available)**

### Vamos retirar as linhas que possuem NA's
```{r}
# retirar linhas com na
df_sem_na <- na.omit(df)
df_sem_na
```

```{r}
# numero de linhas com e sem na
nrow(df)
nrow(df_sem_na)
```

---

# 4. Valores faltantes e especiais

## **1. NA (Not Available)**

### Vamos substituir os NA's por 0
```{r}
# substituir na por 0
df[is.na(df)] <- 0
df
```

---

# 4. Valores faltantes e especiais

## **2. NaN (Not a Number)**

### Representa indefinições matemáticas como 0/0 e log(-1)

```{r}
# nan - not a number
0/0

# nan - not a number
log(-1)
```

---

# 4. Valores faltantes e especiais

## **2. NaN (Not a Number)**

### Um **NaN** é um **NA**, mas o **NA** não é um **NaN**

```{r}
# criar um vetor
ve <- c(1, 2, 3, NA, NaN)
ve
```

```{r}
# verificar a presenca de na
is.na(ve)
```

```{r}
# verificar a presenca de nan
is.nan(ve)
```

---

# 4. Valores faltantes e especiais

## **3. Inf (Infinito)**

### É um número muito grande ou um limite matemático, e.g., 10^310 e 1/0
```{r}
# limite matematico
1/0

# numero muito grande
10^310
```

---

# 4. Valores faltantes e especiais

## **4. NULL**

### Representa um objeto nulo

### Útil para preenchimento de laços e outras aplicações de programação

```{r}
# objeto nulo
nulo <- NULL
nulo
```

---

# 5. Diretório de trabalho

## Endereço da pasta onde o R irá **importar e exportar** os dados

**Atalho**: `ctrl + shift + H`

### **Windows: inverter as barras ("\" por "/")!**

```{r}
## diretorio de trabalho
# pasta onde o r ira importar e exportar os arquivos

# definir o diretorio de trabalho
setwd("/home/mude/data/github/course-geospatial-data-r/03_dados/tabelas")
```

```{r eval=FALSE}
# verificar o diretorio
getwd()
```

```{r eval=FALSE}
# listar os arquivos
dir()
```

---

class: inverse, center, middle

# Vamos trabalhar com dados reais?

---

class: clear, inverse
background-image: url(img/general_real_data.jpg)
background-size: 700px

---

background-image: url(img/general_data_eu_mesmo.png)
background-size: 700px
background-position: 50% 85%

# 6. Importar dados

## ATLANTIC AMPHIBIANS: a dataset of amphibian communities from the Atlantic Forests of South America

### Eu mesmo et al. (2018)

<br><br><br><br><br><br><br><br><br><br><br>
[Vancine et al. (2018)](https://doi.org/10.1002/ecy.2392)

---

background-image: url(img/general_bloco_notas.png), url(img/general_planilha.png)
background-size: 200px, 200px
background-position: 40% 40%, 80% 90%

# 6. Importar dados

## Os arquivos de tabelas geralmente estão num desses **três** formatos:

<br><br>

## 1. csv
## 2. txt
## 3. xlsx

---

# 6. Importar dados

## Ler uma planilha eletrônica (.csv)

```{r eval=FALSE}
# ler uma planilha eletronica (.csv)
read.csv("ATLANTIC_AMPHIBIANS_sites.csv", encoding = "latin1")
```

```{r echo=FALSE}
read.csv(here::here("03_dados", "tabelas", "ATLANTIC_AMPHIBIANS_sites.csv"), encoding = "latin1")
```

---

# 6. Importar dados

## Ler e atribuir uma planilha eletrônica (.csv) a um objeto

```{r echo=FALSE}
da <- read.csv(here::here("03_dados", "tabelas", "ATLANTIC_AMPHIBIANS_sites.csv"), encoding = "latin1")
```

```{r eval=FALSE}
# ler e atribuir uma planilha eletronica (.csv) a um objeto
da <- read.csv("ATLANTIC_AMPHIBIANS_sites.csv", encoding = "latin1")
```

```{r eval=FALSE}
# ver os dados
da
```

```{r}
# conferir a classe
class(da)
```

---

class: inverse, center, middle

# IMPORTANTE: a tabela importada para o R sempre será um **data frame**!

---

# 6. Importar dados

## Ler e atribuir uma planilha simples (.txt) a um objeto

```{r eval=FALSE}
# ler e atribuir uma planilha simples (.txt) a um objeto
da <- read.table("ATLANTIC_AMPHIBIANS_sites.txt", header = TRUE, sep = "\t")
da
```

```{r echo=FALSE}
da
```

---

# 6. Importar dados

## Ler e atribuir uma planilha eletrônica (.xlsx) a um objeto

### Pacote **openxlsx**
```{r eval=FALSE}
# pacote openxlsx
# install.packages("openxlsx")
library(openxlsx)
```

--

### Importar os dados
```{r eval=FALSE}
# ler e atribuir uma planilha eletrônica (.xlsx) a um objeto
da <- openxlsx::read.xlsx("ATLANTIC_AMPHIBIANS_sites.xlsx", sheet = 1, encoding = "latin1")
da
```

```{r echo=FALSE}
da
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### **Funções de conferência**

`head()`: mostra as primeiras 6 linhas<br>
`tail()`: mostra as últimas 6 linhas<br>
`nrow()`: mostra o número de linhas<br>
`ncol()`: mostra o número de colunas<br>
`dim()`: mostra o número de linhas e de colunas<br>
`rownames()`: mostra os nomes das linhas (locais)<br>
`colnames()`: mostra os nomes das colunas (variáveis)<br>
`str()`: mostra as classes de cada coluna (estrutura)<br>
`summary()`: mostra um resumo dos valores de cada coluna

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `head()`: mostra as primeiras 6 linhas

```{r include=FALSE}
# ler e atribuir uma planilha eletronica (.csv) a um objeto
da <- read.csv("/home/mude/data/github/course-geospatial-data-r/03_dados/tabelas/ATLANTIC_AMPHIBIANS_sites.csv",
               encoding = "latin1")
```

```{r}
# primeiras linhas
head(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `head()`: mostra as primeiras 10 linhas

```{r}
# primeiras linhas
head(da, 10)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `tail()`: mostra as últimas 6 linhas

```{r}
# ultimas linhas
tail(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `nrow()`: mostra o número de linhas

```{r}
# numero de linhas
nrow(da)
```

--

### `ncol()`: mostra o número de colunas

```{r}
# numero de colunas
ncol(da)
```

--

### `dim()`: mostra o número de linhas e de colunas
```{r}
# numero de linhas e de colunas
dim(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `rownames()`: mostra os nomes das linhas (locais)

```{r}
# nome das linhas
rownames(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `colnames()`: mostra os nomes das colunas (variáveis)

```{r}
# nome das colunas
colnames(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `str()`: mostra as classes de cada coluna (estrutura)

```{r}
# estrutura dos dados
str(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### `summary()`: mostra um resumo dos valores de cada coluna

```{r}
# resumo dos dados
summary(da)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para conferir os dados

### Verificar a presença de NAs

```{r}
# algum nas?
any(is.na(da))
```
--
```{r}
# quais sao nas?
which(is.na(da))
```

---

# 7. Conferência de dados importados

## Conjunto de funções para manipular os dados

### Retirar os NAs

```{r}
# omitir as linhas com nas e atribuir 
da_na <- na.omit(da)
```

```{r}
# numero de linhas do dado total
nrow(da)
```

```{r}
# numero de linhas do dado sem nas
nrow(da_na)
```

---

# 7. Conferência de dados importados

## Conjunto de funções para manipular os dados

### Subset das linhas

```{r}
# subset das linhas com amostragens em sao paulo
da_sp <- da[da$state == "São Paulo", ]
da_sp
```

---

# 8. Exportar dados

## Exportar uma tabela de dados na pasta do diretório

### Planilha eletrônica (.csv)

```{r eval=FALSE}
# exportar csv
write.csv(da_sp, "ATLANTIC_AMPHIBIAN_sites_sao_paulo.csv", 
          row.names = FALSE, quote = FALSE)
```

### Planilha de texto (.txt)

```{r eval=FALSE}
# exportar txt
write.table(da_sp, "ATLANTIC_AMPHIBIAN_sites_sao_paulo.txt", 
            row.names = FALSE, quote = FALSE)
```

### Planilha eletrônica (.xlsx)
```{r, eval = FALSE, warning = FALSE}
# exportar xlsx
openxlsx::write.xlsx(da_sp, "ATLANTIC_AMPHIBIAN_sites_sao_paulo.xlsx", 
                     row.names = FALSE, quote = FALSE)
```

---

class: clear, inverse, middle, center

# Erros!!!

---

class: clear, inverse, middle, center

# Se seu script rodou sem erros, tem algo errado... (Maurício Vancine)

---

class: clear
background-image: url(img/general_make_impossible.jpeg)
background-size: 600px
background-position: 50% 40%

---

class: clear
background-image: url(img/gif_bugcat_error.gif)
background-size: 800px
background-position: 50% 40%

---

class: clear
background-image: url(img/gif_bugcat_sad.gif)
background-size: 800px
background-position: 50% 50%

---

# 9. Principais erros

## 1. Esquecer de completar um código (+)

Parênteses
```{r error=TRUE}
sum(1, 2
+
```

--
    
Aspas
```{r error=TRUE}
"string
+
```

---

# 9. Principais erros

## 2. Esquecer da vírgula
```{r error=TRUE}
sum(1 2)
```

---

# 9. Principais erros

## 3. Chamar um objeto errado
```{r error=TRUE}
obj <- 10
OBJ
```

---

# 9. Principais erros

## 4. Esquecer de carregar um pacote
```{r echo=TRUE}
detach("package:vegan", unload = TRUE)
```

```{r error=TRUE}
# carregar dados
data(dune)

# funcao do pacote vegan
decostand(dune, "hell")
```

---

# 9. Principais erros

## 4. Esquecer de carregar um pacote
```{r}
# carregar o pacote
library(vegan)

# carregar dados
data(dune)

# funcao do pacote vegan
decostand(dune, "hell")
```

---

background-image: url(img/code_camel_case.png)
background-size: 350px
background-position: 90% 90%

# 9. Principais erros

## 5. Usar o nome da função de forma errônea
```{r error=TRUE}
colsums(dune)
```

---

background-image: url(img/code_camel_case.png)
background-size: 350px
background-position: 90% 90%

# 9. Principais erros

## 5. Usar o nome da função de forma errônea
```{r error=TRUE}
colSums(dune)
```

---

background-image: url(img/code_coding_cases.png)
background-size: 700px
background-position: 50% 40%

# 9. Principais erros

## Cases

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[@allison_horst](https://twitter.com/allison_horst)

---

# 9. Principais erros

## 6. Atentar para o diretório correto
```{r error=TRUE}
# listar os arquivos do diretorio definido
dir()[1:4]

# listar os arquivos do diretorio definido
list.files()[1:4]

# listar os arquivos do diretorio definido por um padrão
dir(pattern = ".Rmd")
```

---

background-image: url(img/cover_ciencias_dados_r.jpg)
background-size: 300px
background-position: 50% 50%

# 10. Principal material de estudo

## Ciência de Dados com R: introdução (2018)

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Guerra et al. (2020)](https://cdr.ibpad.com.br/index.html)

---

background-image: url(img/cover_data_science_r.png)
background-size: 300px
background-position: 50% 55%

# 10. Principal material de estudo

## R for Data Science (2017)

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Wickham & Grolemund (2017)](https://r4ds.had.co.nz/)

---

background-image: url(img/cover_statistical_inference.png)
background-size: 300px
background-position: 50% 55%

# 10. Principal material de estudo

## Statistical Inference via Data Science (2019)

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Ismay & Kim (2019)](https://moderndive.com)

---

background-image: url(img/cover_rmarkdown.png)
background-size: 280px
background-position: 50% 50%

# 10. Principal material de estudo

## R Markdown: The Definitive Guide (2018)

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Xie et al. (2019)](https://bookdown.org/yihui/rmarkdown/)

---

background-image: url(img/cover_rmarkdown_cookbook.png)
background-size: 280px
background-position: 50% 50%

# 10. Principal material de estudo

## R Markdown Cookbook (2021)

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Xie et al. (2021)](https://bookdown.org/yihui/rmarkdown-cookbook/)

---

background-image: url(img/cover_geocompr.png)
background-size: 280px
background-position: 50% 50%

# 10. Principal material de estudo

## Geocomputation with R (2019)

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
[Lovelace et al. (2019)](https://geocompr.robinlovelace.net/)

---

class: inverse, center, middle

# Dúvidas?

---

class: clear, middle
background-image: url(img/gif_frog.gif),url(img/gif_frogs.gif), url(img/package_xaringan.png)
background-size: 250px, 500px, 130px
background-position: 35% 50%, 90% 55%, 5% 86%

## Maurício Vancine

<br><br>

Contatos:

`r icons::icon_style(icons::fontawesome(name = "envelope", style = "solid"), fill = "#23373b")` [mauricio.vancine@gmail.com]()  
`r icons::icon_style(icons::fontawesome("twitter"), fill = "#23373b")` [@mauriciovancine](https://twitter.com/mauriciovancine)  
`r icons::icon_style(icons::fontawesome(name = "github"), fill = "#23373b")` [mauriciovancine](https://github.com/mauriciovancine)
`r icons::icon_style(icons::fontawesome(name = "link", style = "solid"), fill = "#23373b")` [mauriciovancine.github.io](https://mauriciovancine.github.io)

<br><br><br><br><br>

Slides criados via pacote [xaringan](https://github.com/yihui/xaringan) e tema [Metropolis](https://github.com/pat-s/xaringan-metropolis). Animação dos sapos por [@probzz](https://twitter.com/probzz/status/1367613720294170627).